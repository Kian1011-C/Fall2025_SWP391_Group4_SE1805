<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SWP201 - H·ªá th·ªëng ƒë·ªïi pin xe ƒëi·ªán th√¥ng minh</title>
  
  <!-- External CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css">
  
  <!-- Internal CSS -->
  <link rel="stylesheet" href="assets/css/styles.css">
  
  <style>
    /* Additional specific styles that couldn't be moved to external CSS */
    .hero { 
      text-align: center; 
      padding: 80px 0; 
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
      color: white; 
    }
    
    .hero h1 { 
      font-size: 3rem; 
      margin-bottom: 16px; 
      font-weight: 700; 
    }
    
    .hero p { 
      font-size: 1.2rem; 
      margin-bottom: 32px; 
      opacity: 0.9; 
    }
    
    .features { 
      padding: 80px 0; 
      background: var(--surface); 
    }
    
    .feature-grid { 
      display: grid; 
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); 
      gap: 32px; 
      margin-top: 48px; 
    }
    
    .feature { 
      text-align: center; 
      padding: 32px; 
      background: var(--card-bg); 
      border-radius: 12px; 
      border: 1px solid var(--border); 
    }
    
    .feature-icon { 
      font-size: 3rem; 
      margin-bottom: 16px; 
      display: block; 
    }
    
    .pricing { 
      display: grid; 
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
      gap: 24px; 
      margin: 32px 0; 
    }
    
    .pricing .card { 
      text-align: center; 
      position: relative; 
    }
    
    .price { 
      font-size: 2rem; 
      font-weight: 700; 
      color: var(--primary); 
      margin: 16px 0; 
    }
    
    .chip { 
      background: var(--primary); 
      color: white; 
      padding: 4px 8px; 
      border-radius: 12px; 
      font-size: 0.75rem; 
      font-weight: 500; 
    }
    
    ul.clean { 
      list-style: none; 
      text-align: left; 
      margin: 24px 0; 
    }
    
    ul.clean li { 
      padding: 8px 0; 
      display: flex; 
      align-items: center; 
      gap: 8px; 
    }
    
    .tick { 
      color: var(--success); 
      font-weight: bold; 
    }
    
    header { 
      background: var(--surface); 
      padding: 16px 0; 
      border-bottom: 1px solid var(--border); 
    }
    
    nav { 
      display: flex; 
      justify-content: space-between; 
      align-items: center; 
    }
    
    .logo { 
      font-size: 1.5rem; 
      font-weight: 700; 
      color: var(--primary); 
    }
    
    footer { 
      background: var(--surface); 
      padding: 48px 0; 
      border-top: 1px solid var(--border); 
      margin-top: 80px; 
    }
    
    .footer-content { 
      display: grid; 
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); 
      gap: 32px; 
    }
    
    .footer-section h3 { 
      margin-bottom: 16px; 
      color: var(--primary); 
    }
    
    .footer-section a { 
      color: var(--muted); 
      text-decoration: none; 
      display: block; 
      margin-bottom: 8px; 
    }
    
    .footer-section a:hover { 
      color: var(--text); 
    }
    
    .empty-state { 
      text-align: center; 
      padding: 48px 24px; 
      color: var(--muted); 
    }
    
    .empty-icon { 
      font-size: 4rem; 
      margin-bottom: 16px; 
      opacity: 0.5; 
    }
    
    .activity-list { 
      margin-top: 16px; 
    }
    
    .activity-item { 
      display: flex; 
      align-items: center; 
      gap: 12px; 
      padding: 12px 0; 
      border-bottom: 1px solid var(--border); 
    }
    
    .activity-item:last-child { 
      border-bottom: none; 
    }
    
    .activity-icon { 
      font-size: 24px; 
      width: 40px; 
      text-align: center; 
    }
    
    .activity-title { 
      font-weight: 500; 
    }
    
    .activity-time { 
      font-size: 0.875rem; 
      color: var(--muted); 
    }
    
    .chart-placeholder { 
      display: flex; 
      align-items: end; 
      gap: 8px; 
      height: 120px; 
      margin: 16px 0; 
    }
    
    .chart-bar { 
      flex: 1; 
      background: var(--primary); 
      border-radius: 4px 4px 0 0; 
      min-height: 20px; 
      display: flex; 
      align-items: end; 
      justify-content: center; 
      color: white; 
      font-size: 0.75rem; 
      padding-bottom: 4px; 
    }
    
    .current-plan { 
      display: flex; 
      align-items: center; 
      gap: 12px; 
      margin: 16px 0; 
    }
    
    .plan-icon { 
      font-size: 2rem; 
    }
    
    .plan-name { 
      font-weight: 600; 
    }
    
    .plan-expires { 
      font-size: 0.875rem; 
      color: var(--muted); 
    }
    
    table { 
      width: 100%; 
      border-collapse: collapse; 
    }
    
    th, td { 
      padding: 12px; 
      text-align: left; 
      border-bottom: 1px solid var(--border); 
    }
    
    th { 
      background: var(--surface); 
      font-weight: 600; 
    }
    
    .amount-positive { 
      color: var(--success); 
    }
    
    .amount-negative { 
      color: var(--error); 
    }
    
    .status { 
      padding: 4px 8px; 
      border-radius: 12px; 
      font-size: 0.75rem; 
      font-weight: 500; 
    }
    
    .status.success { 
      background: rgba(5, 150, 105, 0.1); 
      color: var(--success); 
    }
    
    .map-container { 
      margin: 24px 0; 
    }
    
    .map-info { 
      margin-top: 24px; 
    }
    
    .table-responsive { 
      overflow-x: auto; 
    }
  </style>
</head>

<body>
  <!-- Header -->
  <header>
    <nav class="container">
      <div class="logo">‚ö° SWP201</div>
      <div>
        <button class="btn btn-outline" onclick="authUI.showLoginModal()">ƒêƒÉng nh·∫≠p</button>
        <button class="btn btn-primary" onclick="authUI.showRegisterModal()">ƒêƒÉng k√Ω</button>
      </div>
    </nav>
  </header>

  <!-- Main Content -->
  <main>
    <!-- Hero Section -->
    <section class="hero">
      <div class="container">
        <h1>üîã ƒê·ªïi pin xe ƒëi·ªán th√¥ng minh</h1>
        <p>Gi·∫£i ph√°p ƒë·ªïi pin nhanh ch√≥ng, ti·ªán l·ª£i v√† th√¢n thi·ªán v·ªõi m√¥i tr∆∞·ªùng</p>
        <button class="btn btn-primary" onclick="authUI.showRegisterModal()">B·∫Øt ƒë·∫ßu ngay</button>
      </div>
    </section>

    <!-- Features Section -->
    <section class="features">
      <div class="container">
        <h2 style="text-align: center;">T·∫°i sao ch·ªçn SWP201?</h2>
        <div class="feature-grid">
          <div class="feature">
            <span class="feature-icon">‚ö°</span>
            <h3>Nhanh ch√≥ng</h3>
            <p>ƒê·ªïi pin ch·ªâ trong 3 ph√∫t, nhanh h∆°n 10 l·∫ßn so v·ªõi s·∫°c th∆∞·ªùng</p>
          </div>
          <div class="feature">
            <span class="feature-icon">üåç</span>
            <h3>Th√¢n thi·ªán m√¥i tr∆∞·ªùng</h3>
            <p>Gi·∫£m thi·ªÉu th·ªùi gian ch·ªù, t·ªëi ∆∞u h√≥a s·ª≠ d·ª•ng nƒÉng l∆∞·ª£ng s·∫°ch</p>
          </div>
          <div class="feature">
            <span class="feature-icon">üì±</span>
            <h3>C√¥ng ngh·ªá IoT</h3>
            <p>H·ªá th·ªëng th√¥ng minh, theo d√µi tr·∫°ng th√°i pin real-time</p>
          </div>
          <div class="feature">
            <span class="feature-icon">üí∞</span>
            <h3>Ti·∫øt ki·ªám chi ph√≠</h3>
            <p>C√°c g√≥i d·ªãch v·ª• linh ho·∫°t, ph√π h·ª£p m·ªçi nhu c·∫ßu s·ª≠ d·ª•ng</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Pricing Section -->
    <section class="container" style="padding: 80px 0;">
      <h2 style="text-align: center;">G√≥i d·ªãch v·ª•</h2>
      <div class="pricing">
        <div class="card">
          <h3>C∆° b·∫£n</h3>
          <div class="price">89.000ƒë<small>/l∆∞·ª£t</small></div>
          <ul class="clean">
            <li><span class="tick">‚úì</span> Thanh to√°n theo l∆∞·ª£t</li>
            <li><span class="tick">‚úì</span> Kh√¥ng cam k·∫øt d√†i h·∫°n</li>
            <li><span class="tick">‚úì</span> Ph√π h·ª£p th·ªânh tho·∫£ng</li>
          </ul>
          <button class="btn btn-primary" onclick="authUI.showRegisterModal()">Ch·ªçn g√≥i</button>
        </div>
        
        <div class="card featured">
          <h3>Premium <span class="chip">Ph·ªï bi·∫øn</span></h3>
          <div class="price">299.000ƒë<small>/th√°ng</small></div>
          <ul class="clean">
            <li><span class="tick">‚úì</span> 8 l∆∞·ª£t ƒë·ªïi pin/th√°ng</li>
            <li><span class="tick">‚úì</span> ∆Øu ti√™n t·∫°i tr·∫°m</li>
            <li><span class="tick">‚úì</span> H·ªó tr·ª£ 24/7</li>
          </ul>
          <button class="btn btn-primary" onclick="authUI.showRegisterModal()">Ch·ªçn g√≥i</button>
        </div>
        
        <div class="card">
          <h3>Enterprise</h3>
          <div class="price">899.000ƒë<small>/th√°ng</small></div>
          <ul class="clean">
            <li><span class="tick">‚úì</span> Kh√¥ng gi·ªõi h·∫°n</li>
            <li><span class="tick">‚úì</span> API t√≠ch h·ª£p</li>
            <li><span class="tick">‚úì</span> Qu·∫£n l√Ω ƒë·ªôi xe</li>
          </ul>
          <button class="btn btn-primary" onclick="authUI.showRegisterModal()">Ch·ªçn g√≥i</button>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h3>‚ö° SWP201</h3>
          <p>H·ªá th·ªëng ƒë·ªïi pin xe ƒëi·ªán th√¥ng minh h√†ng ƒë·∫ßu Vi·ªát Nam</p>
        </div>
        <div class="footer-section">
          <h3>Li√™n k·∫øt</h3>
          <a href="#">V·ªÅ ch√∫ng t√¥i</a>
          <a href="#">D·ªãch v·ª•</a>
          <a href="#">B·∫£n ƒë·ªì tr·∫°m</a>
          <a href="#">H·ªó tr·ª£</a>
        </div>
        <div class="footer-section">
          <h3>H·ªó tr·ª£</h3>
          <a href="#">C√¢u h·ªèi th∆∞·ªùng g·∫∑p</a>
          <a href="#">H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng</a>
          <a href="#">Li√™n h·ªá</a>
          <a href="#">G√≥p √Ω</a>
        </div>
        <div class="footer-section">
          <h3>Li√™n h·ªá</h3>
          <p>üìû 1900-SWP201</p>
          <p>‚úâÔ∏è support@swp201.vn</p>
          <p>üìç TP.HCM, Vi·ªát Nam</p>
        </div>
      </div>
    </div>
  </footer>

  <!-- Authentication Modal -->
  <div id="auth-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>ƒêƒÉng nh·∫≠p / ƒêƒÉng k√Ω</h2>
        <span class="close" onclick="authUI.hideAuthModals()">&times;</span>
      </div>
      <div class="modal-body">
        <!-- Tab Navigation -->
        <div class="nav-tabs" style="margin-bottom: 24px;">
          <button class="nav-tab active" onclick="authUI.showAuthTab('login')">ƒêƒÉng nh·∫≠p</button>
          <button class="nav-tab" onclick="authUI.showAuthTab('register')">ƒêƒÉng k√Ω</button>
          <button class="nav-tab" onclick="authUI.showAuthTab('forgot-password')">Qu√™n m·∫≠t kh·∫©u</button>
        </div>

        <!-- Login Tab -->
        <div id="login-tab" class="auth-tab">
          <form id="login-form">
            <div class="form-group">
              <label>Email</label>
              <input type="email" id="email" required placeholder="your@email.com">
            </div>
            <div class="form-group">
              <label>M·∫≠t kh·∫©u</label>
              <input type="password" id="password" required placeholder="M·∫≠t kh·∫©u c·ªßa b·∫°n">
            </div>
            <button type="submit" class="btn btn-primary" style="width: 100%;">ƒêƒÉng nh·∫≠p</button>
          </form>
          <p style="margin-top: 16px; text-align: center; color: var(--muted);">
            Demo: demo@user.com / 123456
          </p>
        </div>

        <!-- Register Tab -->
        <div id="register-tab" class="auth-tab" style="display: none;">
          <form id="register-form">
            <div class="form-group">
              <label>H·ªç t√™n</label>
              <input type="text" id="register-name" required placeholder="H·ªç v√† t√™n">
            </div>
            <div class="form-group">
              <label>Email</label>
              <input type="email" id="register-email" required placeholder="your@email.com">
            </div>
            <div class="form-group">
              <label>S·ªë ƒëi·ªán tho·∫°i</label>
              <input type="tel" id="register-phone" required placeholder="0123456789">
            </div>
            <div class="form-group">
              <label>M·∫≠t kh·∫©u</label>
              <input type="password" id="register-password" required placeholder="M·∫≠t kh·∫©u">
            </div>
            <div class="form-group">
              <label>X√°c nh·∫≠n m·∫≠t kh·∫©u</label>
              <input type="password" id="register-confirm-password" required placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u">
            </div>
            <button type="submit" class="btn btn-primary" style="width: 100%;">ƒêƒÉng k√Ω</button>
          </form>
        </div>

        <!-- Forgot Password Tab -->
        <div id="forgot-password-tab" class="auth-tab" style="display: none;">
          <form id="forgot-password-form">
            <div class="form-group">
              <label>Email</label>
              <input type="email" id="forgot-email" required placeholder="Nh·∫≠p email ƒë·ªÉ kh√¥i ph·ª•c">
            </div>
            <button type="submit" class="btn btn-primary" style="width: 100%;">G·ª≠i m√£ kh√¥i ph·ª•c</button>
          </form>
        </div>

        <!-- Reset Password Tab -->
        <div id="reset-password-tab" class="auth-tab" style="display: none;">
          <form id="reset-password-form">
            <input type="hidden" id="reset-email">
            <div class="form-group">
              <label>M√£ x√°c nh·∫≠n</label>
              <input type="text" id="reset-code" required placeholder="Nh·∫≠p m√£ t·ª´ email (Demo: 123456)">
            </div>
            <div class="form-group">
              <label>M·∫≠t kh·∫©u m·ªõi</label>
              <input type="password" id="reset-new-password" required placeholder="M·∫≠t kh·∫©u m·ªõi">
            </div>
            <div class="form-group">
              <label>X√°c nh·∫≠n m·∫≠t kh·∫©u m·ªõi</label>
              <input type="password" id="reset-confirm-password" required placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u m·ªõi">
            </div>
            <button type="submit" class="btn btn-primary" style="width: 100%;">ƒê·∫∑t l·∫°i m·∫≠t kh·∫©u</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Battery Swap Process Modal -->
  <div id="swap-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>üîã ƒêang th·ª±c hi·ªán ƒë·ªïi pin</h2>
      </div>
      <div class="modal-body">
        <div class="text-center">
          <div class="loading-spinner" style="margin: 20px auto;"></div>
          <div style="margin: 20px 0;">
            <div style="background: var(--surface); border-radius: 8px; height: 8px; overflow: hidden;">
              <div id="swap-progress" style="background: var(--primary); height: 100%; width: 0%; transition: width 0.3s;"></div>
            </div>
          </div>
          <p id="swap-status">ƒêang kh·ªüi t·∫°o qu√° tr√¨nh ƒë·ªïi pin...</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Include JavaScript Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js"></script>
  
  <!-- Include Application JavaScript Modules -->
  <script src="assets/js/utils.js"></script>
  <script src="assets/js/auth.js"></script>
  <script src="assets/js/payment.js"></script>
  <script src="assets/js/battery-swap.js"></script>
  <script src="assets/js/dashboard.js"></script>
  
  <!-- Include Component Templates -->
  <script src="components/modals.js"></script>
  
  <!-- Application Initialization -->
  <script>
    // Initialize the application
    document.addEventListener('DOMContentLoaded', function() {
      console.log('üöÄ SWP201 Application Started');
      
      // Check if user is already logged in
      if (auth.isLoggedIn()) {
        console.log('User already logged in:', auth.getCurrentUser());
        // Auto show dashboard if already logged in
        // dashboardManager.showDashboard();
      }
      
      // Initialize map for later use
      window.initMap = function() {
        if (typeof L !== 'undefined' && document.getElementById('map')) {
          const map = L.map('map').setView([10.7769, 106.7009], 11);
          
          L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '¬© OpenStreetMap contributors'
          }).addTo(map);
          
          // Add station markers
          const stations = API.getStationsData();
          stations.forEach(station => {
            const marker = L.marker(station.coordinates).addTo(map);
            marker.bindPopup(`
              <strong>${station.name}</strong><br>
              ${station.address}<br>
              <em>${station.posts} tr·ª• ƒë·ªïi pin</em>
            `);
            
            marker.on('click', function() {
              updateSelectedStationInfo(station);
              showToast(`ƒê√£ focus v√†o ${station.name}`, 'success');
            });
          });
        }
      };
      
      function updateSelectedStationInfo(station) {
        const stationInfo = document.getElementById('station-info');
        if (stationInfo) {
          stationInfo.innerHTML = `
            <div class="card">
              <h4>${station.name}</h4>
              <p><strong>ƒê·ªãa ch·ªâ:</strong> ${station.address}</p>
              <p><strong>S·ªë tr·ª•:</strong> ${station.posts} tr·ª• ƒë·ªïi pin</p>
              <p><strong>Tr·∫°ng th√°i:</strong> 
                <span class="status ${station.status === 'active' ? 'success' : 'warning'}">
                  ${station.status === 'active' ? 'Ho·∫°t ƒë·ªông' : 'B·∫£o tr√¨'}
                </span>
              </p>
              <button class="btn btn-primary" onclick="showUserTab('battery-swap')">
                ƒê·ªïi pin t·∫°i ƒë√¢y
              </button>
            </div>
          `;
        }
      }
      
      // Setup form input formatting
      document.addEventListener('input', function(e) {
        // Auto format card number input
        if (e.target.id === 'card-number') {
          let value = e.target.value.replace(/\s/g, '').replace(/[^0-9]/gi, '');
          let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value;
          e.target.value = formattedValue;
        }
        
        // Auto format card expiry input
        if (e.target.id === 'card-expiry') {
          let value = e.target.value.replace(/\D/g, '');
          if (value.length >= 2) {
            value = value.substring(0, 2) + '/' + value.substring(2, 4);
          }
          e.target.value = value;
        }
      });
      
      // Setup payment method selection
      document.addEventListener('change', function(e) {
        if (e.target.name === 'payment-method') {
          document.querySelectorAll('.payment-method').forEach(method => {
            method.classList.remove('active');
          });
          e.target.closest('.payment-method').classList.add('active');
          
          const creditCardForm = document.getElementById('credit-card-form');
          if (creditCardForm) {
            if (e.target.value === 'credit-card') {
              creditCardForm.style.display = 'block';
            } else {
              creditCardForm.style.display = 'none';
            }
          }
        }
      });
    });
  </script>
</body>
</html>